<?xml version="1.0"?>
<source xmlns="http://xml.phpdox.net/token">
  <file xmlns="http://xml.phpdox.net/src" path="/var/www/_modules/ecommerce_test/trunk/docs/en/phpdox/../../../payment_paypal/code/generatedintegrationcode" file="billingstep.php" realpath="/var/www/_modules/ecommerce_test/trunk/payment_paypal/code/generatedintegrationcode/billingstep.php" size="7013" time="2015-03-14T10:44:01+13:00" unixtime="1426283041" sha1="764649610a18ca29ad3c822fd573fe42e93fd215" relative="payment_paypal/code/generatedintegrationcode/billingstep.php"/>
  <line no="1">
    <token name="T_OPEN_TAG">&lt;?php</token>
  </line>
  <line no="2"/>
  <line no="3">
    <token name="T_REQUIRE_ONCE">require_once</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"paypalfunctions.php"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="4"/>
  <line no="5">
    <token name="T_IF">if</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$PaymentOption</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"PayPal"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
  </line>
  <line no="6">
    <token name="T_PHPDOX_OPEN_CURLY">{</token>
  </line>
  <line no="7">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">// ==================================</token>
  </line>
  <line no="8">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">// PayPal Express Checkout Module</token>
  </line>
  <line no="9">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">// ==================================</token>
  </line>
  <line no="10"/>
  <line no="11">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="12">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The paymentAmount is the total value of</token>
  </line>
  <line no="13">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' the shopping cart, that was set</token>
  </line>
  <line no="14">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' earlier in a session variable</token>
  </line>
  <line no="15">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' by the shopping cart page</token>
  </line>
  <line no="16">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="17">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$paymentAmount</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$_SESSION</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Payment_Amount"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="18"/>
  <line no="19">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="20">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' When you integrate this code</token>
  </line>
  <line no="21">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' set the variables below with</token>
  </line>
  <line no="22">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' shipping address details</token>
  </line>
  <line no="23">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' entered by the user on the</token>
  </line>
  <line no="24">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' Shipping page.</token>
  </line>
  <line no="25">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="26">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToName</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShiptoName&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="27">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToStreet</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShipToStreet&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="28">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToStreet2</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShipToStreet2&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//Leave it blank if there is no value</token>
  </line>
  <line no="29">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToCity</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShipToCity&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="30">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToState</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShipToState&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="31">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToCountryCode</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShipToCountryCode&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">// Please refer to the PayPal country codes in the API documentation</token>
  </line>
  <line no="32">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$shipToZip</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;ShipToZip&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="33">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$phoneNum</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;PhoneNumber&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="34"/>
  <line no="35">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="36">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The currencyCodeType and paymentType</token>
  </line>
  <line no="37">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' are set to the selections made on the Integration Assistant</token>
  </line>
  <line no="38">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="39">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$currencyCodeType</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"NZD"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="40">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$paymentType</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Sale"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="41"/>
  <line no="42">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="43">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The returnURL is the location where buyers return to when a</token>
  </line>
  <line no="44">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' payment has been succesfully authorized.</token>
  </line>
  <line no="45">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'</token>
  </line>
  <line no="46">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' This is set to the value entered on the Integration Assistant</token>
  </line>
  <line no="47">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="48">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$returnURL</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"return"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="49"/>
  <line no="50">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="51">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The cancelURL is the location buyers are sent to when they hit the</token>
  </line>
  <line no="52">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' cancel button during authorization of payment during the PayPal flow</token>
  </line>
  <line no="53">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'</token>
  </line>
  <line no="54">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' This is set to the value entered on the Integration Assistant</token>
  </line>
  <line no="55">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="56">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$cancelURL</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"cancel"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="57"/>
  <line no="58">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="59">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' Calls the SetExpressCheckout API call</token>
  </line>
  <line no="60">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'</token>
  </line>
  <line no="61">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The CallMarkExpressCheckout function is defined in the file PayPalFunctions.php,</token>
  </line>
  <line no="62">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' it is included at the top of this file.</token>
  </line>
  <line no="63">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'-------------------------------------------------</token>
  </line>
  <line no="64">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">CallMarkExpressCheckout</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$paymentAmount</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$currencyCodeType</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$paymentType</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$returnURL</token>
    <token name="T_PHPDOX_COMMA">,</token>
  </line>
  <line no="65">
    <token name="T_WHITESPACE">										  </token>
    <token name="T_VARIABLE">$cancelURL</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$shipToName</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$shipToStreet</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$shipToCity</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$shipToState</token>
    <token name="T_PHPDOX_COMMA">,</token>
  </line>
  <line no="66">
    <token name="T_WHITESPACE">										  </token>
    <token name="T_VARIABLE">$shipToCountryCode</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$shipToZip</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$shipToStreet2</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$phoneNum</token>
  </line>
  <line no="67">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="68"/>
  <line no="69">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$ack</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">strtoupper</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"ACK"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="70">
    <token name="T_WHITESPACE">	</token>
    <token name="T_IF">if</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$ack</token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"SUCCESS"</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_BOOLEAN_OR">||</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ack</token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"SUCCESSWITHWARNING"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
  </line>
  <line no="71">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_OPEN_CURLY">{</token>
  </line>
  <line no="72">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$token</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"TOKEN"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="73">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$_SESSION</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">'reshash'</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_VARIABLE">$token</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="74">
    <token name="T_WHITESPACE">		</token>
    <token name="T_STRING">RedirectToPayPal</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$token</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="75">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_CLOSE_CURLY">}</token>
  </line>
  <line no="76">
    <token name="T_WHITESPACE">	</token>
    <token name="T_ELSE">else</token>
  </line>
  <line no="77">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_OPEN_CURLY">{</token>
  </line>
  <line no="78">
    <token name="T_WHITESPACE">		</token>
    <token name="T_COMMENT">//Display a user friendly Error on the page using any of the following error information returned by PayPal</token>
  </line>
  <line no="79">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorCode</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_ERRORCODE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="80">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorShortMsg</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_SHORTMESSAGE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="81">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorLongMsg</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_LONGMESSAGE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="82">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorSeverityCode</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_SEVERITYCODE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="83"/>
  <line no="84">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"SetExpressCheckout API call failed. "</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="85">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Detailed Error Message: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorLongMsg</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="86">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Short Error Message: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorShortMsg</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="87">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Error Code: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorCode</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="88">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Error Severity Code: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorSeverityCode</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="89">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_CLOSE_CURLY">}</token>
  </line>
  <line no="90">
    <token name="T_PHPDOX_CLOSE_CURLY">}</token>
  </line>
  <line no="91">
    <token name="T_ELSE">else</token>
  </line>
  <line no="92">
    <token name="T_PHPDOX_OPEN_CURLY">{</token>
  </line>
  <line no="93">
    <token name="T_WHITESPACE">	</token>
    <token name="T_IF">if</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$PaymentOption</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Visa"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_BOOLEAN_OR">||</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$PaymentOption</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"MasterCard"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_BOOLEAN_OR">||</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$PaymentOption</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Amex"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_BOOLEAN_OR">||</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$PaymentOption</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Discover"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
  </line>
  <line no="94">
    <token name="T_WHITESPACE">			</token>
    <token name="T_BOOLEAN_AND">&amp;&amp;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$PaymentProcessorSelected</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"PayPal Direct Payment"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
  </line>
  <line no="95"/>
  <line no="96">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="97">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The paymentAmount is the total value of</token>
  </line>
  <line no="98">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' the shopping cart, that was set</token>
  </line>
  <line no="99">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' earlier in a session variable</token>
  </line>
  <line no="100">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' by the shopping cart page</token>
  </line>
  <line no="101">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="102">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$paymentAmount</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$_SESSION</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Payment_Amount"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="103"/>
  <line no="104">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="105">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' The currencyCodeType and paymentType</token>
  </line>
  <line no="106">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' are set to the selections made on the Integration Assistant</token>
  </line>
  <line no="107">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//'------------------------------------</token>
  </line>
  <line no="108">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$currencyCodeType</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"NZD"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="109">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$paymentType</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Sale"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="110"/>
  <line no="111">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">//' Set these values based on what was selected by the user on the Billing page Html form</token>
  </line>
  <line no="112"/>
  <line no="113">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$creditCardType</token>
    <token name="T_WHITESPACE"> 		</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;Visa/MasterCard/Amex/Discover&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to one of the acceptable values (Visa/MasterCard/Amex/Discover) match it to what was selected on your Billing page</token>
  </line>
  <line no="114">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$creditCardNumber</token>
    <token name="T_WHITESPACE"> 		</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;CC number&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the string entered as the credit card number on the Billing page</token>
  </line>
  <line no="115">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$expDate</token>
    <token name="T_WHITESPACE"> 				</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;Expiry Date&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the credit card expiry date entered on the Billing page</token>
  </line>
  <line no="116">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$cvv2</token>
    <token name="T_WHITESPACE"> 					</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;cvv2&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the CVV2 string entered on the Billing page</token>
  </line>
  <line no="117">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$firstName</token>
    <token name="T_WHITESPACE"> 				</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;firstName&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the customer's first name that was entered on the Billing page</token>
  </line>
  <line no="118">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$lastName</token>
    <token name="T_WHITESPACE"> 				</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;lastName&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the customer's last name that was entered on the Billing page</token>
  </line>
  <line no="119">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$street</token>
    <token name="T_WHITESPACE"> 				</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;street&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the customer's street address that was entered on the Billing page</token>
  </line>
  <line no="120">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$city</token>
    <token name="T_WHITESPACE"> 					</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;city&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the customer's city that was entered on the Billing page</token>
  </line>
  <line no="121">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$state</token>
    <token name="T_WHITESPACE"> 					</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;state&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the customer's state that was entered on the Billing page</token>
  </line>
  <line no="122">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$zip</token>
    <token name="T_WHITESPACE"> 					</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;zip&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the zip code of the customer's address that was entered on the Billing page</token>
  </line>
  <line no="123">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$countryCode</token>
    <token name="T_WHITESPACE"> 			</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;PayPal Country Code&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the PayPal code for the Country of the customer's address that was entered on the Billing page</token>
  </line>
  <line no="124">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$currencyCode</token>
    <token name="T_WHITESPACE"> 			</token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"&lt;&lt;PayPal Currency Code&gt;&gt;"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_COMMENT">//' Set this to the PayPal code for the Currency used by the customer</token>
  </line>
  <line no="125"/>
  <line no="126">
    <token name="T_WHITESPACE">	</token>
    <token name="T_COMMENT">/*</token>
  </line>
  <line no="127">
    <token name="T_COMMENT">	'------------------------------------------------</token>
  </line>
  <line no="128">
    <token name="T_COMMENT">	' Calls the DoDirectPayment API call</token>
  </line>
  <line no="129">
    <token name="T_COMMENT">	'</token>
  </line>
  <line no="130">
    <token name="T_COMMENT">	' The DirectPayment function is defined in PayPalFunctions.php included at the top of this file.</token>
  </line>
  <line no="131">
    <token name="T_COMMENT">	'-------------------------------------------------</token>
  </line>
  <line no="132">
    <token name="T_COMMENT">	*/</token>
  </line>
  <line no="133"/>
  <line no="134">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">DirectPayment</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$paymentType</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$paymentAmount</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$creditCardType</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$creditCardNumber</token>
    <token name="T_PHPDOX_COMMA">,</token>
  </line>
  <line no="135">
    <token name="T_WHITESPACE">							</token>
    <token name="T_VARIABLE">$expDate</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$cvv2</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$firstName</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$lastName</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$street</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$city</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$state</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$zip</token>
    <token name="T_PHPDOX_COMMA">,</token>
  </line>
  <line no="136">
    <token name="T_WHITESPACE">							</token>
    <token name="T_VARIABLE">$countryCode</token>
    <token name="T_PHPDOX_COMMA">,</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$currencyCode</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="137"/>
  <line no="138">
    <token name="T_WHITESPACE">	</token>
    <token name="T_VARIABLE">$ack</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">strtoupper</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"ACK"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="139">
    <token name="T_WHITESPACE">	</token>
    <token name="T_IF">if</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$ack</token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"SUCCESS"</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_BOOLEAN_OR">||</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ack</token>
    <token name="T_IS_EQUAL">==</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"SUCCESSWITHWARNING"</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
  </line>
  <line no="140">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_OPEN_CURLY">{</token>
  </line>
  <line no="141">
    <token name="T_WHITESPACE">		</token>
    <token name="T_COMMENT">//Getting transaction ID from API responce.</token>
  </line>
  <line no="142">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$TransactionID</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"TRANSACTIONID"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="143"/>
  <line no="144">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Your payment has been successfully processed"</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="145">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_CLOSE_CURLY">}</token>
  </line>
  <line no="146">
    <token name="T_WHITESPACE">	</token>
    <token name="T_ELSE">else</token>
  </line>
  <line no="147">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_OPEN_CURLY">{</token>
  </line>
  <line no="148">
    <token name="T_WHITESPACE">		</token>
    <token name="T_COMMENT">//Display a user friendly Error on the page using any of the following error information returned by PayPal</token>
  </line>
  <line no="149">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorCode</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_ERRORCODE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="150">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorShortMsg</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_SHORTMESSAGE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="151">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorLongMsg</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_LONGMESSAGE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="152">
    <token name="T_WHITESPACE">		</token>
    <token name="T_VARIABLE">$ErrorSeverityCode</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_EQUAL">=</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_STRING">urldecode</token>
    <token name="T_PHPDOX_OPEN_BRACKET">(</token>
    <token name="T_VARIABLE">$resArray</token>
    <token name="T_PHPDOX_OPEN_SQUARE">[</token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"L_SEVERITYCODE0"</token>
    <token name="T_PHPDOX_CLOSE_SQUARE">]</token>
    <token name="T_PHPDOX_CLOSE_BRACKET">)</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="153"/>
  <line no="154">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Direct credit card payment API call failed. "</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="155">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Detailed Error Message: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorLongMsg</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="156">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Short Error Message: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorShortMsg</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="157">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Error Code: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorCode</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="158">
    <token name="T_WHITESPACE">		</token>
    <token name="T_ECHO">echo</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_CONSTANT_ENCAPSED_STRING">"Error Severity Code: "</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_PHPDOX_DOT">.</token>
    <token name="T_WHITESPACE"> </token>
    <token name="T_VARIABLE">$ErrorSeverityCode</token>
    <token name="T_PHPDOX_SEMICOLON">;</token>
  </line>
  <line no="159">
    <token name="T_WHITESPACE">	</token>
    <token name="T_PHPDOX_CLOSE_CURLY">}</token>
  </line>
  <line no="160">
    <token name="T_PHPDOX_CLOSE_CURLY">}</token>
  </line>
  <line no="161">
    <token name="T_CLOSE_TAG">?&gt;</token>
  </line>
  <line no="162"/>
</source>
